# NooForge Refiner

–ú–æ–¥—É–ª—å –¥–ª—è —Å–º—ã—Å–ª–æ–≤–æ–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ LLM (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ –æ–±–ª–∞–∫–µ).  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, —Å–≤–æ–¥–æ–∫ –∏ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π.

---

### ‚öôÔ∏è –¢–µ–∫—É—â–∏–µ —Ñ–ª–∞–≥–∏ CLI

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|
| `--model` | –∏–º—è –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `qwen/qwen-2.5-72b-instruct`) |
| `--input` | –ø—É—Ç—å –∫ –≤—Ö–æ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—É |
| `--output` | –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ JSON |
| `--seg-mode` | —Ä–µ–∂–∏–º —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ (`auto`, `llm-first`, `sentences-only`) |
| `--sentence-units` | —Ä–∞–∑–±–∏–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ —é–Ω–∏—Ç—ã –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º |
| `--bilingual-topics` | –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ç–µ–º—ã –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∏—Ö –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π |
| `--w` | —Ä–∞–∑–º–µ—Ä—ã –æ–∫–æ–Ω –∫–æ–º–ø–æ–∑–∏—Ç–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –Ω–∞–ø—Ä–∏–º–µ—Ä `3,5`) |
| `--log-level` | —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`INFO`, `DEBUG`, `ERROR`) |
| `--strategy` | —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`local`, `remote`, `hybrid`) |
| `--cache` | –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É –¥–ª—è –∫—ç—à–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `.cache/nooforge_llm`) |
| `--no-cache` | –æ—Ç–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ LLM |
| `--embed-model` | –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `sentence-transformers/all-MiniLM-L6-v2`) |
| `--refine` | –≤–∫–ª—é—á–∏—Ç—å –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫—É —é–Ω–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ LLM |
| `--fuse` | –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fused-–∫–æ–º–ø–æ–∑–∏—Ç—ã (title + rollup + topics) |
| `--debug` | –≤–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –æ—Ç–ª–∞–¥–∫–∏ |
| `--max-tokens` | –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–æ–≤ LLM |
| `--temperature` | —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.1) |

---

### ü™ü –ü—Ä–∏–º–µ—Ä (Windows PowerShell)
```sh
python -m cli_openrouter `
  --model qwen/qwen-2.5-72b-instruct `
  --input samples/tst04.txt `
  --output out.json `
  --seg-mode llm-first `
  --sentence-units `
  --bilingual-topics `
  --w 3,5 `
  --log-level DEBUG
```

```sh
python -m cli_openrouter `
  --model qwen/qwen-2.5-72b-instruct `
  --input samples/postgres_parts.txt `
  --output out.json `
  --seg-mode llm-first `
  --sentence-units `
  --bilingual-topics `
  --w 3,5 `
  --log-level DEBUG
```
